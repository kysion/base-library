# GitHub CI/CD 自动化流程

本项目配置了完善的 GitHub Actions CI/CD 自动化流程，用于代码质量检查和自动化版本发布。

## 持续集成 (CI)

当代码被推送或提交 Pull Request 时，系统将自动执行以下检查：

### 代码检查

- **代码规范检查** - 使用 golangci-lint 检查代码质量
- **安全漏洞扫描** - 使用 gosec 扫描代码安全问题

### 测试验证

- **单元测试** - 运行所有测试用例，确保代码功能正常
- **覆盖率分析** - 生成测试覆盖率报告，监控代码质量

## 自动发布流程

当代码被合并到主分支（main）时，将会自动触发以下版本发布流程：

1. **代码检出** - 检出最新的代码和标签信息
2. **环境设置** - 配置 Go 开发环境
3. **依赖验证** - 验证依赖项完整性
4. **测试执行** - 运行测试确保代码质量
5. **版本确定** - 自动递增版本号（补丁版本+1）
6. **依赖更新** - 更新和整理依赖关系
7. **变更记录** - 生成详细的变更日志
8. **创建发布** - 在 GitHub 创建新的 Release
9. **提交更新** - 更新依赖并提交修改

## 版本号规则

版本号遵循语义化版本（[Semantic Versioning](https://semver.org/lang/zh-CN/)）规则：

- **主版本号 (MAJOR)** - 当进行不兼容的 API 修改时递增
- **次版本号 (MINOR)** - 当添加向下兼容的新功能时递增
- **修订号 (PATCH)** - 当进行向下兼容的问题修正时递增

默认情况下，工作流程会自动增加修订号 (PATCH)。如果需要升级主版本号或次版本号，请使用手动触发方式。

## 手动触发发布

除了自动触发外，还可以手动触发版本发布流程，并选择版本更新类型：

1. 在 GitHub 仓库页面点击 "Actions" 标签
2. 选择 "Release Go Module" 工作流
3. 点击 "Run workflow" 按钮
4. 选择所需的版本更新类型（patch, minor, major）
5. 点击 "Run workflow" 开始发布流程

## 注意事项

- 确保在合并代码前所有测试都已通过
- 提交信息应清晰描述所做的修改
- 遵循项目的代码规范和贡献指南
- 对于重大更改，应当先创建 Issue 进行讨论
